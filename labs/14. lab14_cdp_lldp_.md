# CDP/LLDP Device Discovery

Having an understanding of how network devices are connected when you’re not physically present, but logged in via the CLI, helps give awareness to network engineers without needing to know the passwords to log into them. For this lab, we will take a look at two related protocols: **Cisco Discovery Protocol (CDP)** and **Link Layer Discovery Protocol (LLDP)**. Both of these protocols work at a layer 2 level, using special Ethernet frames to advertise information to directly connected neighbors.  

We will go over these topics:

1. **Verifying CDP**
2. **Enabling LLDP**
3. **Comparing CDP vs. LLDP**
4. **Wrap-Up**

Let’s get going! This should be a very simple lab.

### **Verifying CDP**

CDP is a Cisco proprietary protocol that has Cisco switches and routers send CDP messages out of each of their interfaces to neighboring devices, as well as listening for advertisements sent by other Cisco devices. This information is typically:

- Device hostnames
- Network/data-link addresses
- Port identifiers
- Device capabilities
- Platform

IOS typically enables CDP globally on each device by default, so there’s no need to actually configure CDP, only verifying that it’s there. 

```bash
show cdp neighbors
show cdp neighbors detail
```

Entries should look something like this:

```bash
Device ID: SW2.homelab.local
Entry address(es):
IP address: 192.168.1.21
IPv6 address: FE80::215:F9FF:FE51:2FC1  (link-local)
IPv6 address: FD00:1:0:1::15  (global unicast)
Platform: cisco WS-C3560-24PS,  Capabilities: Switch IGMP
Interface: FastEthernet0/1,  Port ID (outgoing port): FastEthernet0/1
Holdtime : 161 sec
```

If you need to configure/disable CDP, you can enable/disable it like:

```bash
conf t
!
cdp run
cdp enable
!
end
wr
```

**Verify**

```bash
show cdp
show cdp traffic
show cdp interface <interface number>
show cdp entry <device name>
```

That’s really all there is to CDP. Since it’s usually globally configured by default, we’re mostly just verifying that it’s working on each device.

### **Enabling LLDP**

Cisco created CDP because there wasn’t a standard in place for a discovery protocol until the IEEE created the 802.1AB standard, which thus created Link-Layer Discovery Protocol (LLDP). LLDP has the same general features as CDP, but it’s a vendor-neutral alternative, so devices of different vendors can still work together to create a network.

LLDP is disabled by default for Cisco devices, so let’s configure it globally on all of our devices:

**WLC, AP1, SW1, SW2, SW3, R1, R2, and R3**:

```bash
conf t
!
lldp run
!
end
wr
```

**Verify**

```bash
show lldp
show lldp neighbors
show lldp neighbors detail
```

LLDP can be configured globally on a device, but you can also disable it on specific interfaces as well. For my case, I’ll configure it globally since most enterprise networks will typically run both protocols at the same time.

### **Comparing  CDP vs. LLDP**

Just to briefly go over both of the protocols and compare them, let’s take a look at this table:

| **Feature** | **CDP** | **LLDP** |
| --- | --- | --- |
| Type | Cisco Proprietary | IEEE Standard (802.1AB) |
| Default State | Enabled | Disabled |
| Multivendor Support | Cisco Only | Universal |
| TLVs | IOS Version, Platform, Port ID, VLAN, IP | Chassis ID, Port ID, Capabilities |
| Used For | Cisco Discovery, Troubleshooting, Cisco IP Phones | Multivendor Interop, VoIP, Automation |

One protocol isn’t better than the other; they’re used concurrently, giving much-needed information about how the topology is working together physically.

### Wrap-Up

CDP and LLDP both work hand in hand, allowing engineers to not only see how devices are connected but also where issues can take place when an interface is plugged into the wrong port or understand what type of devices surround other devices. This is extremely helpful when working with technicians who are physically at devices and engineers who could be on the opposite side of the nation or globe.
